var pitana={};!function(){"use strict";var a=function(b){var c,d=function(){"function"==typeof b.initialize&&b.initialize.apply(this,arguments)};c=void 0!==this&&this.extend===a?this:Object,d.prototype=Object.create(c.prototype),d.prototype.constructor=d;for(var e in b)b.hasOwnProperty(e)===!0&&(d.prototype[e]=b[e]);return d.extend=a,d.parent=c,d.super=c.prototype,d};pitana.klass=a}(),pitana.Base=pitana.klass({}),function(){"use strict";pitana.settings={preStart:function(){},preEnd:function(){},postTemplateProcessing:function(a){return a},debug:!1,isConsoleAvailable:!1}}(),function(){"use strict";pitana.util={log:function(){pitana.settings.debug===!0&&pitana.settings.isConsoleAvailable===!0&&console.log.apply(console,arguments)},logError:function(){pitana.settings.debug===!0&&pitana.settings.isConsoleAvailable===!0&&console.error.apply(console,arguments)},"for":function(a,b){for(var c in a)a.hasOwnProperty(c)===!0&&b(a[c],c)},addProperty:function(a,b,c,d){var e;Object.defineProperty(a,b,{enumerable:!0,configurable:!0,get:function(){return c(e),e},set:function(a){e=a,d(e)}})}}}(),function(){"use strict";var a=pitana.util.log;pitana.EventBus=pitana.Base.extend({initialize:function(){pitana.Base.apply(this,arguments),this._NewsPaperList={},this._OrderList=[]},on:function(){return this.subscribe.apply(this,arguments)},subscribe:function(b,c){if(a("subscribed ",b),"string"!=typeof b||"function"!=typeof c)return-1;var d=this._NewsPaperList[b];"object"!=typeof d&&(d=this._NewsPaperList[b]=[]);var e=d.push(c)-1;return this._OrderList.push({newsPaper:b,customer:e})-1},off:function(){return this.unsubscribe.apply(this,arguments)},unsubscribe:function(b){var c=this._OrderList[b];void 0!==c&&(a("unsubscribe ",c.newsPaper),delete this._NewsPaperList[c.newsPaper][c.customer])},trigger:function(){this.publish.apply(this,arguments)},publish:function(){a.apply(null,arguments);var b=Array.prototype.slice.call(arguments),c=b.slice(0,1)[0];b.shift();var d=this._NewsPaperList[c];if("undefined"!=typeof d)for(var e=d.length,f=0;e>f;f++)"function"==typeof d[f]&&d[f].apply(this,b)}})}(),function(){"use strict";var a=Element.prototype;a.matchesSelector=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector,a.matches||(a.matches=a.matchesSelector),pitana.domEvents={addLiveEventListener:function(a,b,c,d,e){var f=function(a){var b=a.target;if(""===c)d.call(e,a,a.currentTarget,a.currentTarget.dataset);else for(;b!==a.currentTarget&&b!==document&&null!==b;){if(b.matches(c)===!0){d.call(e,a,b,b.dataset);break}b=b.parentNode}};return a.addEventListener(b,f,!1),f},trigger:function(a,b,c){void 0===c&&(c={});var d=document.createEvent("CustomEvent");d.initCustomEvent(b,c.bubbles!==!1,c.cancelable!==!1),a.dispatchEvent(d)}}}(),function(){"use strict";pitana.HTMLElement=pitana.Base.extend({initialize:function(a){if(pitana.Base.apply(this,arguments),this.$=a.ele,this.template instanceof HTMLTemplateElement)this.$.appendChild(this.template.content.cloneNode(!0));else{var b="";"string"==typeof this.template&&(b=this.template),"function"==typeof this.template&&(b=this.template()),this.$.innerHTML=pitana.settings.postTemplateProcessing(b)}this._viewMetadata={eventBus:pitana.settings.GlobalEventBus,topicList:{},eventsMap:{}};var c=this;void 0!==this.globalEvents&&pitana.util.for(this.globalEvents,function(a,b){c.subscribeGlobalEvent(b,a)}),void 0!==this.events&&this.on(this.events),"function"==typeof pitana.settings.preStart&&pitana.settings.preStart.call(this)},_getEventBus:function(){return this._viewMetadata.eventBus},subscribeGlobalEvent:function(a,b){var c=this,d=function(){c[b].apply(c,arguments)};void 0===this._viewMetadata.topicList[a]&&(this._viewMetadata.topicList[a]=[]);var e=this._getEventBus();this._viewMetadata.topicList[a].push(e.subscribe(a,d))},unsubscribeGlobalEvent:function(a){var b=this._getEventBus();void 0!==this._viewMetadata.topicList[a]&&(this._viewMetadata.topicList[a].map(function(a){b.unsubscribe(a)}),delete this._viewMetadata.topicList[a])},publishGlobalEvent:function(){var a=this._getEventBus();a.publish.apply(a,arguments)},on:function(a){var b=this;pitana.util.for(a,function(a,c){c=c.trim().replace(/ +/g," ");var d=c.split(" "),e=d.shift(),f=d.join(" "),g=pitana.domEvents.addLiveEventListener(b.$,e,f,b[a],b);b._viewMetadata.eventsMap[c]={eventName:e,callback:g}})},off:function(a){var b=this._viewMetadata.eventsMap[a];void 0!==b&&"object"==typeof b&&(this.$.removeEventListener(b.eventName,b.callback),delete this._viewMetadata.eventsMap[a])},trigger:function(a){pitana.domEvents.trigger(this.$,a)},_endModule:function(){"function"==typeof pitana.settings.postEnd&&pitana.settings.postEnd.call(this);var a=this;pitana.util.for(this._viewMetadata.eventsMap,function(b,c){a.off(c)}),this.$.innerHTML="",pitana.util.for(this._viewMetadata.topicList,function(b,c){a.unsubscribeGlobalEvent(c)})}})}(),function(){"use strict";pitana.ObjectMap=pitana.Base.extend({initialize:function(){pitana.Base.apply(this,arguments),this.allNodes=[]},add:function(a,b){var c=a.__ELEMENT_TO_VIEW_INDEX__;if(void 0!==c)throw"Week map Error, object already mapped";this.allNodes.push({obj:a,val:b}),a.__ELEMENT_TO_VIEW_INDEX__=this.allNodes.length-1},get:function(a){var b=a.__ELEMENT_TO_VIEW_INDEX__;return void 0!==b?this.allNodes[b].val:void 0},set:function(a,b){var c=a.__ELEMENT_TO_VIEW_INDEX__;void 0!==c&&(this.allNodes[c].val=b)},remove:function(a){var b=a.__ELEMENT_TO_VIEW_INDEX__;void 0!==b&&(this.allNodes[b]=null,delete a.__ELEMENT_TO_VIEW_INDEX__)}})}(),function(){"use strict";var a={"true":!0,"false":!1,"null":!1,"":!0};pitana.accessorType={},pitana.accessorType.int={get:function(a,b){var c=this.getAttribute(a);return null!==c?parseInt(c,10):b.default},set:function(a,b){"number"==typeof b&&this[a]!==b+""&&this.setAttribute(a,b)}},pitana.accessorType.boolean={get:function(b){var c=a[this.getAttribute(b)];return void 0===c?!1:c},set:function(a,b){this[a]!==b&&"boolean"==typeof b&&(b===!0?this.setAttribute(a,""):this.removeAttribute(a))}}}(),function(){"use strict";pitana.nodeToViewMapping=new pitana.ObjectMap,pitana.registerElement=function(a){var b=Object.create(HTMLElement.prototype);if(b.createdCallback=function(){var b=new a({ele:this});pitana.nodeToViewMapping.add(this,b),"function"==typeof b.createdCallback&&b.createdCallback.apply(b,arguments)},b.attachedCallback=function(){var a=pitana.nodeToViewMapping.get(this);"function"==typeof a.attachedCallback&&a.attachedCallback.apply(a,arguments)},b.detachedCallback=function(){var a=pitana.nodeToViewMapping.get(this);"function"==typeof a.detachedCallback&&a.detachedCallback.apply(a,arguments),a._endModule(),pitana.nodeToViewMapping.remove(this)},void 0!==a.prototype.methods&&(b._commonMethod=function(a,b){var c=pitana.nodeToViewMapping.get(this),d=c[a];"function"==typeof d&&d.apply(c,b)},a.prototype.methods.map(function(a){b[a]=function(){b._commonMethod.call(this,a,arguments)}})),b.attributeChangedCallback=function(a){var b=pitana.nodeToViewMapping.get(this),c=arguments;pitana.util.for(b.accessors,function(d,e){e.toLowerCase()===a&&"string"==typeof d.onChange&&b[d.onChange].apply(b,c)}),"function"==typeof b.attributeChangedCallback&&b.attributeChangedCallback.apply(b,arguments)},void 0!==a.prototype.accessors&&pitana.util.for(a.prototype.accessors,function(a,c){var d={};d[c]={get:function(){return void 0!==pitana.accessorType[a.type]?pitana.accessorType[a.type].get.call(this,c,a):this.getAttribute(c)},set:function(b){void 0!==pitana.accessorType[a.type]?pitana.accessorType[a.type].set.call(this,c,b,a):this.setAttribute(c,b),"function"==typeof a.afterSet&&a.afterSet.apply(pitana.nodeToViewMapping.get(this),arguments)}},Object.defineProperties(b,d)}),"function"!=typeof document.registerElement)throw"document.registerElement not found, make sure you can included WebComponents Polyfill";var c=a.prototype.tagName.split("-").map(function(a){return a.charAt(0).toUpperCase()+a.slice(1)}).join("")+"Element";window[c]=document.registerElement(a.prototype.tagName,{prototype:b})}}();